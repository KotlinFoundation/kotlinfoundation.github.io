{"version":3,"file":"component---src-components-post-index-tsx-content-file-path-home-runner-work-kotlinfoundation-github-io-kotlinfoundation-github-io-src-pages-news-gsoc-2024-wasm-incremental-compilation-index-md-8c3947b006e29ec3f77f.js","mappings":"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","sources":["webpack://kotlinfoundation.github.io/./src/pages/news/gsoc-2024-wasm-incremental-compilation/index.md","webpack://kotlinfoundation.github.io/./src/components/Post/index.tsx","webpack://kotlinfoundation.github.io/./src/components/Layout/index.tsx","webpack://kotlinfoundation.github.io/./src/components/Post/Post.module.css"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    a: \"a\",\n    h2: \"h2\",\n    ul: \"ul\",\n    li: \"li\",\n    strong: \"strong\",\n    code: \"code\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"The Kotlin Foundation sponsored four projects for the \", React.createElement(_components.a, {\n    href: \"https://summerofcode.withgoogle.com/archive/2024/organizations/kotlin-foundation\"\n  }, \"Google Summer of Code 2024\"), \", and we are excited to announce the completion of the “Incremental Compilation for the Kotlin/Wasm Compiler” project! JetBrains, a Kotlin Foundation member, provided mentoring support for this project.\"), \"\\n\", React.createElement(_components.p, null, \"This project enhanced the Kotlin-to-Wasm compiler with incremental compilation capabilities, reducing build times by allowing it to recompile only modified files. The contributor, Osama Ahmad, optimized and reused components from the Kotlin/JS backend while improving documentation and refactoring the codebase.\"), \"\\n\", React.createElement(_components.p, null, \"Thanks to \", React.createElement(_components.a, {\n    href: \"https://www.linkedin.com/in/osamaahmad123/\"\n  }, \"Osama Ahmad\"), \" and the mentor from JetBrains, \", React.createElement(_components.a, {\n    href: \"https://www.linkedin.com/in/igoriakovlev\"\n  }, \"Igor Yakovlev\"), \", for their great input!\"), \"\\n\", React.createElement(_components.p, null, \"Explore \", React.createElement(_components.a, {\n    href: \"https://kotlinlang.org/docs/wasm-overview.html\"\n  }, \"Kotlin/Wasm\"), \".\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"introduction\"\n  }, \"Introduction\"), \"\\n\", React.createElement(_components.p, null, \"Incremental compilation is a technique that helps increase compilation speed by recompiling only changed files instead of your whole program (a clean build). The Kotlin-to-Wasm compiler is used to support only clean builds, but during this project, we enhanced it to support incremental compilation, too.\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"goals-of-the-project\"\n  }, \"Goals of the project\"), \"\\n\", React.createElement(_components.p, null, \"The primary goals for the project were:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"To implement incremental compilation for the Wasm backend.\"), \"\\n\", React.createElement(_components.li, null, \"To reuse code as much as possible from the JavaScript  backend.\"), \"\\n\", React.createElement(_components.li, null, \"To specialize and optimize incremental compilation for Wasm.\"), \"\\n\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"achievements\"\n  }, \"Achievements\"), \"\\n\", React.createElement(_components.p, null, \"During the project, the following key achievements were made:\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Incorporation of incremental compilation\"), \": Now, the Wasm backend supports incremental compilation in addition to performing clean builds.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Code reuse\"), \": Many of the incremental compilation components were reused from the JavaScript backend and are specialized to work with the Wasm backend as well. One example is the CacheUpdater component, which determines the files for which we can use cached compiled files and the files that need to be recompiled, and updates the cached files as appropriate.\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"Optimizations\"), \": Multiple optimizations have been tried. Some are not worth the complexity they’ll introduce, such as trying to resolve struct field IDs in link time, but some have been successfully applied, such as the relocation of most bodiless declarations before starting the compilation process.\"), \"\\n\", React.createElement(_components.li, null, \"Documentation and refactoring: As a side effect of incorporating incremental compilation, the codebase became more complex and needed some refactoring and documentation for easier future development. One example is breaking the final linking function, \", React.createElement(_components.code, null, \"linkWasmCompiledFragments\"), \", into multiple smaller and clearer functions, along with the necessary documentation.Newly introduced components such as \", React.createElement(_components.code, null, \"WasmSerializer\"), \" and \", React.createElement(_components.code, null, \"WasmDeserializer\"), \" are well documented, as well.\"), \"\\n\"), \"\\n\", React.createElement(_components.h2, {\n    id: \"next-steps\"\n  }, \"Next steps\"), \"\\n\", React.createElement(_components.p, null, \"Through benchmarking, we found that the time taken to serialize and deserialize Wasm cached compiled files majorly contributes to linking time. This is because a single Wasm binary is produced, and each time a change is made, we need to load (deserialize) all cached compiled modules and link all of them in a single binary, even if only a single file in a single module was changed.\"), \"\\n\", React.createElement(_components.p, null, \"One solution to this problem is to implement per-module compilation, in which each Kotlin module is compiled to a standalone Wasm binary, and utilize Wasm features to link between the different module Wasm binaries. This way, we don’t need to load every module and link all of them into a single binary on each recompilation.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import React from \"react\";\nimport GATSBY_COMPILED_MDX from \"/home/runner/work/kotlinfoundation.github.io/kotlinfoundation.github.io/src/pages/news/gsoc-2024-wasm-incremental-compilation/index.md\";\nimport {useTextStyles} from '@jetbrains/kotlin-web-site-ui/out/components/typography';\nimport cn from 'classnames';\nimport {useStaticQuery, withPrefix} from 'gatsby';\nimport Layout from '../Layout';\nimport {Markdown} from '../Markdown';\nimport * as style from './Post.module.css';\nimport {jsx as _jsx} from \"react/jsx-runtime\";\nimport {jsxs as _jsxs} from \"react/jsx-runtime\";\nfunction PageTemplate(_ref) {\n  var _post$frontmatter$soc, _post$frontmatter$cov;\n  let {children, ...props} = _ref;\n  const textCn = useTextStyles();\n  const {location} = props;\n  const {allMdx: {nodes: posts}} = useStaticQuery(\"914412448\");\n  const post = posts.find(post => withPrefix(post.fields.slug) === location.pathname);\n  const {title, date} = post.frontmatter;\n  const coverImage = ((_post$frontmatter$soc = post.frontmatter.socialImage) === null || _post$frontmatter$soc === void 0 ? void 0 : _post$frontmatter$soc.publicURL) || ((_post$frontmatter$cov = post.frontmatter.coverImage) === null || _post$frontmatter$cov === void 0 ? void 0 : _post$frontmatter$cov.publicURL);\n  props.pageContext.frontmatter = {\n    ...props.pageContext.frontmatter,\n    contactUs: true\n  };\n  return _jsxs(Layout, {\n    ...props,\n    socialImage: coverImage,\n    children: [_jsx(\"p\", {\n      className: cn(textCn('ktl-text-3'), 'ktl-text--gray'),\n      children: date\n    }), _jsx(\"h1\", {\n      className: cn('ktf-h2 ktf-h3--mm', style.title),\n      children: title\n    }), _jsx(Markdown, {\n      children: children\n    })]\n  });\n}\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PageTemplate, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\n","import '@rescui/typography/lib/font-jb-sans-auto.css';\nimport '@jetbrains/kotlin-web-site-ui/out/components/typography/index.css';\nimport '@jetbrains/kotlin-web-site-ui/out/components/grid/index.css';\nimport '@jetbrains/kotlin-web-site-ui/out/components/cta-block/index.css';\nimport cn from 'classnames';\nimport { ReactNode } from 'react';\nimport './typography.css';\nimport './heading.css';\nimport { ContactUs } from '../ContactUs';\nimport { Footer } from '../Footer';\nimport { Header } from '../Header';\nimport { Markdown } from '../Markdown';\nimport { SEO } from '../Seo';\nimport * as styles from './layout.module.css';\nimport { LocationContext } from './locationContext';\n\nexport enum LayoutSize {\n  Regular = 'regular',\n  Narrow = 'narrow',\n  Wide = 'wide',\n}\n\ninterface MDLayoutProps {\n  title?: string;\n  layout?: LayoutSize;\n  contactUs?: boolean;\n}\n\nexport interface BaseLayoutProps {\n  location: Location;\n  children: null | ReactNode;\n  socialImage?: string;\n}\n\ntype MarkdownLayoutProps = BaseLayoutProps & {\n  pageContext?:\n    | undefined\n    | {\n        frontmatter?: MDLayoutProps;\n      };\n};\n\ntype LayoutProps = BaseLayoutProps & MDLayoutProps;\n\nexport function Layout({ children, location, title, layout, socialImage = null, contactUs }: LayoutProps) {\n  const content =\n    layout === LayoutSize.Wide ? (\n      children\n    ) : (\n      <RegularLayout className={LayoutSize.Narrow === layout && styles.narrow}>{children}</RegularLayout>\n    );\n\n  return (\n    <LocationContext.Provider value={location}>\n      <SEO title={title} image={socialImage} />\n      <Header />\n      <div className={styles.layout}>\n        {content}\n        {contactUs && <ContactUs />}\n        <Footer />\n      </div>\n    </LocationContext.Provider>\n  );\n}\n\ntype RegularLayoutProps = {\n  className?: string;\n  children: ReactNode;\n};\n\nfunction RegularLayout({ className, children }: RegularLayoutProps) {\n  return <div className={cn(className, 'ktl-layout ktl-layout--center ktl-layout--spacing')}>{children}</div>;\n}\n\nexport function MarkdownLayout({ children, ...props }: LayoutProps) {\n  return (\n    <Layout {...props}>\n      <Markdown>{children}</Markdown>\n    </Layout>\n  );\n}\n\nexport function PageMarkdownLayout({ pageContext, ...props }: MarkdownLayoutProps) {\n  const title = pageContext?.frontmatter?.title;\n  const layout = pageContext?.frontmatter?.layout ?? LayoutSize.Narrow;\n  const contact = pageContext?.frontmatter?.contactUs ?? false;\n\n  return <MarkdownLayout {...props} title={title} layout={layout} contactUs={contact} />;\n}\n\nexport default PageMarkdownLayout;\n","// extracted by mini-css-extract-plugin\nexport var title = \"Post-module--title--44f76\";"],"names":["_createMdxContent","props","_components","Object","assign","p","a","h2","ul","li","strong","code","_provideComponents","components","React","href","id","wrapper","MDXLayout","PageTemplate","_ref","_post$frontmatter$soc","_post$frontmatter$cov","children","textCn","useTextStyles","location","allMdx","nodes","posts","useStaticQuery","post","find","withPrefix","fields","slug","pathname","title","date","frontmatter","coverImage","socialImage","publicURL","pageContext","contactUs","_jsxs","Layout","_jsx","className","cn","style","Markdown","GatsbyMDXWrapper","GATSBY_COMPILED_MDX","LayoutSize","layout","content","Wide","RegularLayout","Narrow","styles","LocationContext","value","SEO","image","Header","ContactUs","Footer","_ref2","MarkdownLayout","_ref3","_ref4","_pageContext$frontmat","_pageContext$frontmat2","_pageContext$frontmat3","_pageContext$frontmat4","_pageContext$frontmat5","contact"],"sourceRoot":""}